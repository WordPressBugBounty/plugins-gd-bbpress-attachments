!function(s,n){var o,i,r,e,t,a,c,p=this;p.FS=p.FS||{},p.FS.PostMessage=(o=new NoJQueryPostMessageMixin("postMessage","receiveMessage"),i={},r=decodeURIComponent(document.location.hash.replace(/^#/,"")),e=r.substring(0,r.indexOf("/","https://"===r.substring(0,8)?8:7)),t=""!==r,a=s(window),c=s("html"),{init:function(e,t){o.receiveMessage(function(e){var t=JSON.parse(e.data);if(i[t.type])for(var s=0;s<i[t.type].length;s++)i[t.type][s](t.data)},e),FS.PostMessage.receiveOnce("forward",function(e){window.location=e.url}),0<(t=t||[]).length&&a.on("scroll",function(){for(var e=0;e<t.length;e++)FS.PostMessage.postScroll(t[e])})},init_child:function(){this.init(e),s(window).bind("load",function(){FS.PostMessage.postHeight(),FS.PostMessage.post("loaded")})},hasParent:function(){return t},postHeight:function(e,t){this.post("height",{height:(e=e||0)+s(t=t||"#wrap_section").outerHeight(!0)})},postScroll:function(e){this.post("scroll",{top:a.scrollTop(),height:a.height()-parseFloat(c.css("paddingTop"))-parseFloat(c.css("marginTop"))},e)},post:function(e,t,s){console.debug("PostMessage.post",e),s?o.postMessage(JSON.stringify({type:e,data:t}),s.src,s.contentWindow):o.postMessage(JSON.stringify({type:e,data:t}),r,window.parent)},receive:function(e,t){console.debug("PostMessage.receive",e),n===i[e]&&(i[e]=[]),i[e].push(t)},receiveOnce:function(e,t){this.is_set(e)||this.receive(e,t)},is_set:function(e){return n!=i[e]},parent_url:function(){return r},parent_subdomain:function(){return e}})}(jQuery);