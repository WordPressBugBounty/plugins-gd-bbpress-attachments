!function(s,n){var o,i,r,t,e,a,c,p=this;p.FS=p.FS||{},p.FS.PostMessage=(o=new NoJQueryPostMessageMixin("postMessage","receiveMessage"),i={},r=decodeURIComponent(document.location.hash.replace(/^#/,"")),t=r.substring(0,r.indexOf("/","https://"===r.substring(0,8)?8:7)),e=""!==r,a=s(window),c=s("html"),{init:function(t,e){o.receiveMessage(function(t){var e=JSON.parse(t.data);if(i[e.type])for(var s=0;s<i[e.type].length;s++)i[e.type][s](e.data)},t),FS.PostMessage.receiveOnce("forward",function(t){t.url&&(t.url.startsWith("http://")||t.url.startsWith("https://"))&&(window.location=t.url)}),0<(e=e||[]).length&&a.on("scroll",function(){for(var t=0;t<e.length;t++)FS.PostMessage.postScroll(e[t])})},init_child:function(){e&&(this.init(t),s(window).bind("load",function(){FS.PostMessage.postHeight(),FS.PostMessage.post("loaded")}))},hasParent:function(){return e},postHeight:function(t,e){this.post("height",{height:(t=t||0)+s(e=e||"#wrap_section").outerHeight(!0)})},postScroll:function(t){this.post("scroll",{top:a.scrollTop(),height:a.height()-parseFloat(c.css("paddingTop"))-parseFloat(c.css("marginTop"))},t)},post:function(t,e,s){console.debug("PostMessage.post",t),s?o.postMessage(JSON.stringify({type:t,data:e}),s.src,s.contentWindow):o.postMessage(JSON.stringify({type:t,data:e}),r,window.parent)},receive:function(t,e){console.debug("PostMessage.receive",t),n===i[t]&&(i[t]=[]),i[t].push(e)},receiveOnce:function(t,e){this.is_set(t)||this.receive(t,e)},is_set:function(t){return n!=i[t]},parent_url:function(){return r},parent_subdomain:function(){return t}})}(jQuery);